<?xml version="1.0"?>
<instances>
    <instance name="hoststatus" check_type="simple" pid_file_name="hoststatus_zmq" process_name="hoststatus_zmq" runs_on="client">
    </instance>
    <instance check_type="meta" name="logging-server" runs_on="client" pid_file_name="logserver/logserver.pid" has_force_stop="1" meta_server_name="logserver" uuid-postfix="logging-server">
        <start-argument>
            <arg key="user">idlog</arg>
            <arg key="group">idg</arg>
        </start-argument>
        <nice-level>15</nice-level>
        <access-rights>
            <dir value="/var/log/cluster/logging-server" user="idlog" group="idg" create="1" recursive="1"/>
            <dir value="/var/lib/logging-server" user="idlog" group="idg" create="1"/>
        </access-rights>
        <network>
            <ports>
                <port type="command">8011</port>
            </ports>
        </network>
        <access-rights>
            <dir value="/var/lib/logging-server" user="idlog" group="idg" create="1" mask="0777"/>
            <dir value="/var/log/cluster/sockets" user="idrrd" group="idg" create="1" mask="0777"/>
        </access-rights>
    </instance>
    <!-- wait_time of 120 seconds to give the meta server some time to shut down -->
    <instance check_type="meta" name="meta-server" short="meta" runs_on="client" has_force_stop="1" wait_time="120" uuid-postfix="meta-server">
        <nice-level>15</nice-level>
        <network>
            <ports>
                <port type="command">8012</port>
            </ports>
        </network>
    </instance>
    <!-- meta-server has a longer wait_time because we have to wait for all subprocesses to terminate -->
    <instance check_type="meta" name="host-monitoring" short="collserver" runs_on="client" pid_file_name="collserver/collserver.pid"  has_force_stop="1" meta_server_name="collserver" module="initat.host_monitoring.main" wait_time="300" reload="1">
        <programm-name>collserver</programm-name>
        <programm-title>icsw.collserver</programm-title>
        <old-binary>collserver.py</old-binary>
        <nice-level>15</nice-level>
        <network>
            <ports>
                <port type="command">2001</port>
            </ports>
        </network>
    </instance>
    <instance check_type="meta" name="package-client" runs_on="client"  has_force_stop="1" pid_file_name="package-client/package-client.pid" uuid-postfix="package-client">
        <module-name>initat.package_install.client.main</module-name>
        <old-binary>package-client</old-binary>
        <nice-level>15</nice-level>
        <network>
            <ports>
                <port type="command">2003</port>
            </ports>
        </network>
    </instance>
</instances>
