.SUFFIXES:
.SUFFIXES: .o .c
.PHONY: clean all
comp=gcc
progs=tell_mother hoststatus 

ifeq ($(shell uname -m), x86_64)
	LIB_DIR=lib64
else
	LIB_DIR=lib
endif

default: all

clean:
	rm -f *.o $(progs)

all:	$(progs)

hoststatus: hoststatus.o
	$(comp) hoststatus.o -o hoststatus
	strip hoststatus

tell_mother: tell_mother.o
	$(comp) tell_mother.o -o tell_mother
	strip tell_mother

tell_mother_zmq: tell_mother_zmq.o
	$(comp) -L/opt/cluster/$(LIB_DIR)/ -lzmq tell_mother_zmq.o -o tell_mother_zmq
	strip tell_mother_zmq

%.o: %.c
	$(comp) -I/opt/cluster/include $< -O3 -c -o $@

