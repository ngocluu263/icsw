.SUFFIXES:
.SUFFIXES: .o .c
.PHONY: clean all

comp=gcc
progs=ccollclient csnmpclient csnmpclientmorph

ifeq ($(shell uname -m), x86_64)
        LIB_DIR=lib64
else
        LIB_DIR=lib
endif

default: all

clean:
	rm -f *.o $(progs)

all:	$(progs)

ccollclient: ccollclient.o
	$(comp) ccollclient.o -o ccollclient
	strip ccollclient

ccollclientzmq: ccollclientzmq.o
	$(comp) -L/opt/cluster/$(LIB_DIR)/ -lzmq ccollclientzmq.o -o ccollclientzmq
	strip ccollclientzmq

csnmpclient: csnmpclient.o
	$(comp) csnmpclient.o -o csnmpclient
	strip csnmpclient

csnmpclientmorph: csnmpclientmorph.o
	$(comp) csnmpclientmorph.o -o csnmpclientmorph
	strip csnmpclientmorph

%.o: %.c
	$(comp) $< -O1 -c -I. -I/opt/cluster/include -o $@
