<script type="text/ng-template" id="icsw.monitoring.build_info">
    <div class="container-fluid">
        <h3>
            Build info ({{ struct.masters.length }} builds)
            <span class="text-warning" ng-show="struct.loading">Updating data...</span>
        </h3>
        <table
            class="table table-condensed table-hover" style="width: auto;"
            st-table="entries_displayed"
            st-safe-src="struct.masters"
            ng-show="struct.masters.length > 0"
        >
            <thead>
                <tr>
                    <td colspan="99">
                        <div
                            icsw-tools-pagination
                            st-items-by-page="10"
                            st-displayed-pages="11"
                            possible-items-by-page="10,20,50,100,200,500,1000">
                        </div>
                    </td>
                </tr>
                <tr>
                    <th>device (#slaves)</th>
                    <th>start</th>
                    <th>conf</th>
                    <th>run / sync</th>
                    <th>devices</th>
                    <th title="Monitoring Daemon version" class="text-center">MonDaemon</th>
                    <th title="ICSW Software version" class="text-center">ICSW</th>
                    <th title="Livestatus version" class="text-center">Livestatus</th>
                    <th>raw size (transfers)</th>
                    <th>data size (files)</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat-start="build in entries_displayed" ng-class="build.$$line_class">
                    <th>{{ struct.device_tree.all_lut[build.device].full_name }}
                        <span ng-show="build.mon_dist_slave_set.length">({{ build.mon_dist_slave_set.length }})</span>
                    </th>
                    <td>{{ build.$$build_time }} ({{ build.$$build_diff_time }})</td>
                    <td class="text-right">{{ get_conf_time(build) }}</td>
                    <td class="text-right">{{ get_run_time(build) }}</td>
                    <td class="text-right" ng-class="{'danger': build.unreachable_devices > 0}">{{ build.num_devices }}
                        <span ng-show="build.unreachable_devices"> ({{ build.unreachable_devices }})</span>
                    </td>
                    <td class="text-center">{{ build.mon_version }}</td>
                    <td class="text-center">{{ build.relayer_version }}</td>
                    <td class="text-center">{{ build.livestatus_version }}</td>
                    <td colspan="2"></td>
                </tr>
                <tr ng-repeat-end ng-repeat="slave in get_slaves(build)">
                    <td>({{ $index + 1 }}) {{ struct.device_tree.all_lut[slave.device].full_name }}</td>
                    <td>{{ get_time(slave.sync_start) }} ({{ get_diff_time(slave.sync_start) }})</td>
                    <td class="text-right">{{ get_conf_time(slave) }}</td>
                    <td class="text-right">
                        {{ get_sync_time(slave) }} <span ng-show="slave.num_runs > 1">({{ slave.num_runs}} )</span>
                    </td>
                    <td class="text-right">{{ slave.num_devices }}</td>
                    <td class="text-center">{{ slave.mon_version || '---' }}</td>
                    <td class="text-center">{{ slave.relayer_version || '---' }}</td>
                    <td class="text-center">{{ slave.livestatus_version }}</td>
                    <td class="text-right">
                        {{ slave.size_raw | get_size:1:1024 }} ({{ slave.num_transfers }})
                    </td>
                    <td class="text-right">
                        {{ slave.size_data | get_size:1:1024 }} ({{ slave.num_files }})
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</script>
