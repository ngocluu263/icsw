<script type="text/ng-template" id="icsw.layout.menubar">
    <nav
        class="navbar navbar-default navbar-fixed-top"
        role="navigation"
        ng-show="struct.current_user"
        icsw-element-size="size"
        ng-controller="icswMenuBaseCtrl"
        ng-cloak
    >
        <div class="container-fluid">
            <icsw-menu-progress-bars user="struct.current_user"></icsw-menu-progress-bars>

            <!-- <div class="nostyle" style="initial">
                <div class="navbar yamm navbar-default navbar-fixed-top">
                    <div class="container">
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown">Dropdown</a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <div class="yamm-content">
                                            <div class="row">
                                                <ul class="col-sm-2 list-unstyled">
                                                <li>
                                                  <p><strong>Status</strong></p>
                                                </li>
                                                <li><a href="#"><span class="fa fa-bars"></span>List Item</a></li>
                                                <li><a href="#"><span class="fa fa-bars"></span>List Item</a></li>
                                                <li><a href="#"><span class="fa fa-bars"></span>List Item</a></li>
                                                <li><a href="#"><span class="fa fa-bars"></span>List Item</a></li>
                                                <li><a href="#"><span class="fa fa-bars"></span>List Item</a></li>
                                                <li><a href="#"><span class="fa fa-bars"></span>List Item</a></li>
                                                </ul>
                                                <ul class="col-sm-2 list-unstyled">
                                                <li>
                                                  <p><strong>Configuration</strong></p>
                                                </li>
                                                <li><a href="#"><span class="fa fa-bars"></span>Link Item</a></li>
                                                <li><a href="#"><span class="fa fa-bars"></span>Link Item</a></li>
                                                <li><a href="#"><span class="fa fa-bars"></span>Link Item</a></li>
                                                <li><a href="#"><span class="fa fa-bars"></span>Link Item</a></li>
                                                <li><a href="#"><span class="fa fa-bars"></span>Link Item</a></li>
                                                <li><a href="#"><span class="fa fa-bars"></span>Link Item</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div> -->

            <icsw-menu-directive></icsw-menu-directive>

            <div class="collapse navbar-collapse">
                <!-- @if DEBUG -->
                <form class="navbar-form navbar-left">
                    <div class="input-group">
                        <input
                            type="text"
                            class="form-control"
                            ng-model="struct.search_string"
                            icsw-auto-focus="struct.focus_search"
                            placeholder="enter search or command ..."
                            typeahead-editable="false"
                            autocomplete="off"
                            uib-typeahead="hint for hint in get_selections($viewValue)"
                            typeahead-loading="struct.typeahead_loading"
                        />
                        <span class="input-group-btn">
                            <span class="fa fa-search"></span>
                        </span>
                    </div>
                </form>
                <!-- @endif -->

                <ul class="nav navbar-nav navbar-right" ng-if="struct.current_user" style="margin-right:0px;">
                    <!-- <li class="active" ng-click="device_selection($event)">
                        <a>
                            <span class="fa fa-desktop fa-lg" title="Device Selection">
                            </span>
                            {{ struct.selection_string }}
                        </a>
                    </li> -->
                    <li>
                        <a class="dropdown-toggle cursorpointer" data-toggle="dropdown"> <!--  style="padding-bottom:15px;"> -->
                            <span ng-if="struct.current_user">
                                <span class="fa fa-user fa-lg fa_top"></span>
                                <span title="{{ struct.current_user.full_name }}">{{ struct.current_user.login }}</span>
                                <span ng-show="struct.current_user.login != struct.current_user.login_name"> (via alias {{ struct.current_user.login_name }})</span>
                                &nbsp;&nbsp;<icsw-background-job-info></icsw-background-job-info>
                            </span>
                            <span class="fa fa-sort-down pull-right"></span>&nbsp;&nbsp;
                        </a>
                        <ul class="dropdown-menu">
                            <li ng-if="struct.current_user">
                                <a ui-sref="main.useraccount">
                                    <span class="fa fa-info-circle fa_icsw"></span>
                                    Account Info
                                </a>
                            </li>
                            <!-- @if DEBUG -->
                            <li ng-show="has_menu_permission('backbone.user.admin')">
                                <a href="{{ ICSW_URLS.ADMIN_INDEX }}">
                                    <span class="fa fa-wrench fa_icsw"></span>
                                    Admin
                                </a>
                            </li>
                            <!-- @endif -->
                            <li ng-if="struct.current_user">
                                <a ui-sref="logout">
                                    <span class="fa fa-sign-out fa_icsw"></span>
                                    Logout
                                </a>
                            </li>
                            <li class="divider" ng-if="struct.current_user"></li>
                            <li ng-show="handbook_url_valid">
                                <a href="{{ handbook_url }}" target="_blank">
                                    <span class="fa fa-book fa_icsw"></span>PDF Handbook
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</script>

<script type="text/ng-template" id="icsw.layout.submenubar">
    <nav class="navbar navbar-default submenu-bar" ng-if="struct.current_user" style="position:fixed;width:100%;z-index:1029;margin-top:-30px;">
        <ul class="sub-breadcrumb pull-left">
            <li ng-repeat="entry in struct.bc_list track by $index"  class="pull-left">
                <a class="cursorpointer" ui-sref="{{ entry.sref }}" ui-sref-opts="{icswRegister: false}" ng-show="!entry.has_devsel">
                    <span class="fa" ng-class="entry.icon"/> {{ entry.name }}
                </a>
                <button type="button" ng-show="entry.has_devsel" class="btn btn-xs btn-default" ng-click="activate_state(entry)">
                    <span class="fa" ng-class="entry.icon"/> {{ entry.name }}
                </button>
            </li>
            <li class="pull-right cursorpointer">
                <span
                    class="label"
                    ng-class="{'label-success': struct.in_sync, 'label-danger': !struct.in_sync}"
                    ng-show="struct.any_selected"
                    title="{{ struct.title_str }}"
                    ng-click="device_selection($event)"
                >{{ struct.select_txt }} selected</span>
                <span
                    class="label"
                    ng-class="{'label-warning': struct.in_sync, 'label-danger': !struct.in_sync}"
                    ng-show="!struct.any_selected"
                    title="{{ struct.title_str }}"
                    ng-click="device_selection($event)"
                >No devices selected</span>
                <icsw-tools-button ng-show="!struct.any_selected && struct.tree_valid" type="select" size="xs" value="Select all" ng-click="select_all($event)"></icsw-tools-button>
            </li>
        </ul>
    </nav>
</script>

<script type="text/ng-template" id="icsw.layout.menubar.progress">
    <ul class="nav navbar-nav">
        <li class="active" ng-if="num_gauges">
            <div ng-repeat="(key, obj) in cur_gauges" class="progress" style="width:200px; margin-top:10px;">
                <uib-progressbar animate="true" value="obj.value" type="success">
                    <span>{{ obj.value }} %</span>
                </uib-progressbar>
            </div>
        </li>
        <li class="active" ng-if="num_gauges == 0"><!-- redirect_to_init() -->
            <img height="42px" ng-attr-src="{{ initProduct.menu_gfx_url }}" ng-click="go_mainboard($event)" style="cursor: pointer" title="{{ initProduct.name }}" alt="{{ initProduct.name }}"/>
        </li>
    </ul>
</script>
