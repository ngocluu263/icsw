<script type="text/ng-template" id="icsw.layout.menubar">
    <nav
        class="navbar navbar-default navbar-fixed-top {{ struct.current_user ? '' : 'ng-cloak' }}"
        role="navigation"
        icsw-element-size="size"
        ng-controller="icswMenuBaseCtrl"
        ng-cloak
    >
        <icsw-menu-progress-bars user="struct.current_user"></icsw-menu-progress-bars>

        <ul class="nav navbar-nav" ng-if="struct.current_user">
            <li ng-click="device_quickselection()">
                <a>
                    <span class="fa fa-desktop fa-lg" title="Device Selection">
                    </span>
                </a>
            </li>
            <li>
                <a ui-sref="main.dashboard">
                    <span class="fa fa-home fa-lg" title="Dashboard"></span>
                </a>
            </li>
        </ul>

        <icsw-menu-directive></icsw-menu-directive>

        <ul class="nav navbar-nav navbar-right" ng-if="struct.current_user">
            <li>
                <a class="dropdown-toggle" data-toggle="dropdown">
                    <span ng-if="struct.current_user">
                        <span class="fa fa-user fa-lg fa_top"></span>
                        <span title="{{ struct.current_user.full_name }}">{{ struct.current_user.login }}</span>
                        <span ng-show="struct.current_user.login != struct.current_user.login_name"> (via alias {{ struct.current_user.login_name }})</span>
                        &nbsp;&nbsp;<icsw-background-job-info></icsw-background-job-info>
                    </span>
                    <span class="fa fa-sort-down pull-right"></span>&nbsp;&nbsp;
                </a>
                <ul class="dropdown-menu">
                    <li ng-if="struct.current_user">
                        <a ui-sref="main.useraccount">
                            <span class="fa fa-info-circle fa_icsw"></span>
                            Account Info
                        </a>
                    </li>
                    <li ng-show="has_menu_permission('backbone.user.admin')">
                        <a href="{{ ICSW_URLS.ADMIN_INDEX }}">
                            <span class="fa fa-wrench fa_icsw"></span>
                            Admin
                        </a>
                    </li>
                    <li ng-if="struct.current_user">
                        <a ui-sref="logout">
                            <span class="fa fa-sign-out fa_icsw"></span>
                            Logout
                        </a>
                    </li>
                    <li class="divider" ng-if="struct.current_user"></li>
                    <li ng-if="struct.current_user">
                        <a ui-sref="main.serverinfo">
                            <span class="fa fa-info fa_icsw"></span>
                            Server information
                        </a>
                    </li>
                    <li ng-show="handbook_url_valid">
                        <a href="{{ handbook_url }}" target="_blank">
                            <span class="fa fa-book fa_icsw"></span>PDF Handbook
                        </a>
                    </li>
                    <li ng-show="has_menu_permission('background_job.show_background')">
                        <a ui-sref="main.backgroundinfo">
                            <span class="fa fa-list fa-sm fa_icsw"></span>
                            Background Job Info
                        </a>
                    </li>
                    <li>
                        <a ng-click="switch_theme()" target="_blank">
                            <span class="fa fa-tint fa_icsw"></span>Toggle Theme
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </nav>
</script>

<script type="text/ng-template" id="icsw.layout.menubar.progress">
    <ul class="nav navbar-nav">
        <li class="active" ng-if="num_gauges">
            <div ng-repeat="(key, obj) in cur_gauges" class="progress" style="width:200px; margin-top:10px;">
                <uib-progressbar animate="true" value="obj.value" type="success"><span>{{ obj.value }} %</span></uib-progressbar>
            </div>
        </li>
        <li class="active" ng-if="num_gauges == 0">
            <img height="42px" ng-attr-src="{{ initProduct.menu_gfx_url }}" ng-click="redirect_to_init()" style="cursor: pointer" title="{{ initProduct.name }}" alt="{{ initProduct.name }}"/>
        </li>
    </ul>
</script>
