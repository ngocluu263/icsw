<script type="text/ng-template" id="icsw.layout.selection.modify">
    <div ng-controller="icswLayoutSelectionController">
        <div class="input-group">
            <div ng-class="search_ok && 'form-group' || 'form-group has-error'">
                <input type="text" class="form-control" ng-disabled="is_loading" ng-model="searchstr" placeholder="search ..." ng-change="update_search()"/>
            </div>
            <span class="input-group-btn">
                <button class="btn btn-success fa fa-chevron-right" title="Use selection" type="button" ng-click="call_devsel_func()" ng-show="devsel_receiver">
                     Apply
                </button>
                <button class="btn btn-warning fa fa-remove" title="Clear selection" type="button" ng-click="clear_search()">
                </button>
            </span>
        </div>
        <div class="input-group">
            <icsw-tools-button type="display" size="sm" value="show selection" ng-show="selection.any_selected()" ng-click="toggle_show_selection()"></icsw-tools-button>
            <icsw-tools-button type="modify" size="sm" value="resolve lazy selection" ng-show="selection.any_lazy_selected()" ng-click="resolve_lazy_selection()"></icsw-tools-button>
        </div>
        <small>
        <ul class="list-group" ng-show="show_selection && selection.any_selected()">
            <li class="list-group-item" ng-show="selection.devg_sel.length">
                <strong>{{ selection.devg_sel.length }} lazy Device Groups:</strong> {{ resolve_device_groups(selection) }}
            </li>
            <li class="list-group-item" ng-show="selection.cat_sel.length">
                <strong>{{ selection.cat_sel.length }} lazy Categories:</strong> {{ resolve_categories(selection) }}
            </li>
            <li class="list-group-item" ng-show="selection.dev_sel.length">
                <strong>{{ selection.dev_sel.length }} direct Devices:</strong> {{ resolve_devices(selection) }}
            </li>
            <li class="list-group-item text-success" ng-show="selection.tot_dev_sel.length">
                <strong>{{ selection.tot_dev_sel.length }} total Devices:</strong> {{ resolve_total_devices(selection) }}
            </li>
        </ul>
        </small>
        <tabset>
            <tab select="activate_tab('d')" active="tabs['d']">
                <tab-heading>
                    Device
                    <button class="btn btn-warning btn-xs fa fa-remove" title="Clear selection" type="button" ng-click="clear_selection('d')">
                         Clear
                    </button>
                </tab-heading>
                <!-- use tree for production or ntree for testing -->
                <!-- add attribute max-heigth to limit used height -->
                <tree treeconfig="tc_devices" single="true"></tree>
            </tab>
            <tab select="activate_tab('g')" active="tabs['g']">
                <tab-heading>
                    Group
                    <button class="btn btn-warning btn-xs fa fa-remove" title="Clear selection" type="button" ng-click="clear_selection('g')">
                         Clear
                    </button>
                </tab-heading>
                <tree treeconfig="tc_groups" single="true"></tree>
            </tab>
            <tab select="activate_tab('c')" active="tabs['c']">
                <tab-heading>
                    Category
                    <button class="btn btn-warning btn-xs fa fa-remove" title="Clear selection" type="button" ng-click="clear_selection('c')">
                         Clear
                    </button>
                </tab-heading>
                <tree treeconfig="tc_categories"></tree>
            </tab>
        </tabset>
    </div>
</script>
