<script type="text/ng-template" id="icsw.livestatus.mon.table.view">
    <div uib-alert class="alert-warning" ng-show="!struct.monitoring_data.services.length">No service results</div>
    <table
        st-table="entries_displayed"
        st-safe-src="struct.monitoring_data.services"
        class="table table-condensed table-hover table-striped"
        style="font-size:100%;"
        ng-if="struct.monitoring_data.services.length"
    >
        <thead>
            <tr>
                <td colspan="99" style="vertical-align:middle;">
                    <h3 class="pull-left" style="margin: 3px 10px 0 0;">Services</h3>
                    <span class="pull-left" style="height:25px; width:25px;">
                        <icsw-livestatus-service-circle-info icsw-monitoring-data="struct.monitoring_data"></icsw-livestatus-service-circle-info>
                    </span>
                </td>
            </tr>
            <tr>
                <td colspan="99">
                    <div class="pull-left">
                        <input st-search="$$search_string" class="form-control form-control-inline" style="margin-right:20px;" placeholder="filter ..." type="search"/>
                    </div>
                    <div icsw-tools-pagination st-items-by-page="20" icsw-callback="pagination_changed"
                         possible-items-by-page="20,50,100,200,500,1000" class="pull-left" style="margin-top:4px;">
                    </div>
                    <div>
                        <icsw-tools-button
                            type="modify"
                            size="sm"
                            icsw-value="struct.modify_value"
                            ng-show="struct.selected"
                            ng-click="modify_entries($event)"
                        ></icsw-tools-button>
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="99">
                    <icsw-tools-show-hide-columns icsw-callback="columns_changed" columns="state devflags devcats state_type description monflags moncats output" create-show-column="true">
                    </icsw-tools-show-hide-columns>
                </td>
            </tr>
            <tr>
                <th st-sort="host_name" st-sort-default="true">Device</th>
                <th ng-show="show_column.devflags">DevFlags</th>
                <th ng-show="show_column.devcats">DevCats</th>
                <th ng-show="show_column.state" st-sort="state">State</th>
                <th ng-show="show_column.description" st-sort="description">Description</th>
                <th ng-show="show_column.monflags">MonFlags</th>
                <th ng-show="show_column.moncats">MonCats</th>
                <th st-sort="last_check">Last Check</th>
                <th st-sort="last_state_change">Last Change</th>
                <th ng-show="show_column.output" st-sort="plugin_output">Result</th>
            </tr>
        </thead>
        <tbody>
            <tr icsw-livestatus-mon-table-row icsw-livestatus-table-row-sel="service"
                ng-repeat="service in entries_displayed"
            >
            </tr>
        </tbody>
    </table>
</script>

<script type="text/ng-template" id="icsw.livestatus.mon.table.row">
    <td ng-class="service.$$host_mon_result.$$icswStateClass" class="text-nowrap">
        <button type="button" class="btn btn-xs" ng-class="service.$$host_mon_result.$$icswStateBtnClass" ng-click="show_device($event, service.$$host_mon_result)">
            {{ service.$$host_mon_result.display_name }}
        </button>
    </td>
    <td class="text-nowrap text-center" ng-show="show_column.devflags">
        <span ng-show="service.$$host_mon_result.$$icswShowAttemptInfo" class="label" ng-class="service.$$host_mon_result.$$icswAttemptLabelClass">
            {{ service.$$host_mon_result.$$icswAttemptInfo }}
        </span>
        <span ng-show="service.$$host_mon_result.$$icswPassiveCheck" title="host is passive checked" class="glyphicon glyphicon-download"></span>
    </td>
    <td ng-show="show_column.devcats" class="text-nowrap">
        {{ service.$$host_mon_result.$$icswCategories }}
    </td>
    <td class="text-nowrap" ng-show="show_column.state" ng-class="service.$$icswStateClass">
        {{ service.$$icswStateString }}
        <span ng-show="show_column.state_type" class="pull-right badge">{{ service.$$icswStateTypeString }}</span>
    </td>
    <td class="text-nowrap" ng-show="show_column.description">{{ service.display_name }}</td>
    <td class="text-nowrap text-center" ng-show="show_column.monflags">
        <span class="label" ng-class="service.$$icswAttemptLabelClass" title="attempt info">{{ service.$$icswAttemptInfo }}</span>
        <span class="fa fa-pencil" title="acknowledgment status" ng-show="service.acknowledged == '1'"></span>
        <span ng-show="service.$$icswPassiveCheck" title="service is passive checked" class="glyphicon glyphicon-download"></span>
    </td>
    <td class="text-nowrap" ng-show="show_column.moncats">{{ service.$$icswCategories }}</td>
    <td class="text-nowrap">{{ service.$$icswLastCheckString }}</td>
    <td class="text-nowrap">{{ service.$$icswLastStateChangeString }}</td>
    <td ng-show="show_column.output">{{ service.plugin_output }}</td>
</script>

<script type="text/ng-template" id="icsw.livestatus.device.table.view">
    <div uib-alert class="alert-warning" ng-show="!struct.monitoring_data.hosts.length">No Device Results</div>
    <table
        st-table="entries_displayed"
        st-safe-src="struct.monitoring_data.hosts"
        class="table table-condensed table-hover table-striped"
        style="font-size:100%;"
        ng-if="struct.monitoring_data.hosts.length"
    >
        <thead>
            <tr>
                <td colspan="99" style="vertical-align:middle;">
                    <h3 class="pull-left" style="margin: 3px 10px 0 0;">Devices</h3>
                    <span class="pull-left" style="height:25px; width:25px;">
                        <icsw-livestatus-device-circle-info icsw-monitoring-data="struct.monitoring_data"></icsw-livestatus-device-circle-info>
                    </span>
                </td>
            </tr>
            <tr>
                <td colspan="99">
                    <div class="pull-left">
                        <input st-search="$$search_string" class="form-control form-control-inline" style="margin-right:20px;" placeholder="filter ..." type="search"/>
                    </div>
                    <div icsw-tools-pagination st-items-by-page="20" icsw-callback="pagination_changed"
                         possible-items-by-page="20,50,100,200,500,1000" class="pull-left" style="margin-top:4px;">
                    </div>
                    <div>
                        <icsw-tools-button
                            type="modify"
                            size="sm"
                            icsw-value="struct.modify_value"
                            ng-show="struct.selected"
                            ng-click="modify_entries($event)"
                        ></icsw-tools-button>
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="99">
                    <icsw-tools-show-hide-columns icsw-callback="columns_changed" columns="devcats state state_type flags output" create-show-column="true"></icsw-tools-show-hide-columns>
                </td>
            </tr>
            <tr>
                <th st-sort="host_name" st-sort-default="true">Device</th>
                <th ng-show="show_column.devcats">DevCats</th>
                <th ng-show="show_column.state" st-sort="state">State</th>
                <th ng-show="show_column.flags">Flags</th>
                <th ng-show="show_column.description" st-sort="description">Description</th>
                <th st-sort="last_check">Last Check</th>
                <th st-sort="last_state_change">Last Change</th>
                <th ng-show="show_column.output" st-sort="plugin_output">Result</th>
            </tr>
        </thead>
        <tbody>
            <tr icsw-livestatus-device-table-row icsw-livestatus-table-row-sel="host"
                ng-repeat="host in entries_displayed"
            >
            </tr>
        </tbody>
    </table>
</script>

<script type="text/ng-template" id="icsw.livestatus.device.table.row">
    <td ng-class="host.$$icswStateClass" class="text-nowrap">
        <button type="button" class="btn btn-xs" ng-class="host.$$icswStateBtnClass" ng-click="show_device($event, host)">{{ host.display_name }}</button>
    </td>
    <td ng-show="show_column.devcats" class="text-nowrap">
        {{ host.$$icswCategories }}
    </td>
    <td class="text-nowrap" ng-show="show_column.state" ng-class="host.$$icswStateClass">
        {{ host.$$icswStateString }}
        <span ng-show="show_column.state_type" class="pull-right badge">{{ host.$$icswStateTypeString }}</span>
    </td>
    <td class="text-nowrap text-center" ng-show="show_column.flags">
        <span class="label" ng-class="host.$$icswAttemptLabelClass" title="attempt info">{{ host.$$icswAttemptInfo }}</span>
        <span class="fa fa-pencil" title="acknowledgment status" ng-show="host.acknowledged == '1'"></span>
        <span ng-show="host.$$icswPassiveCheck" title="host is passive checked" class="glyphicon glyphicon-download"></span>
    </td>
    <td class="text-nowrap">{{ host.$$icswLastCheckString }}</td>
    <td class="text-nowrap">{{ host.$$icswLastStateChangeString }}</td>
    <td ng-show="show_column.output">{{ host.plugin_output }}</td>
</script>

<script type="text/ng-template" id="icsw.livestatus.modify.entries">
    <form class="form-horizontal" name="form_data">
        <fieldset>
            <legend>Action</legend>
            <div class="form-group">
                <label class="control-label col-sm-3 requiredField icsw-formlabel">
                    Action
                </label>
                <div class="controls col-sm-8">
                    <ui-select ng-model="edit_obj.action" class="maxwidth500" ng-disabled="false">
                        <ui-select-match class="ui-select-match" placeholder="Action">
                            {{ $select.selected.long }}
                        </ui-select-match>
                        <ui-select-choices class="ui-select-choices" repeat="value.short as value in valid_actions | props_filter:{long:$select.search}">
                            <div ng-bind-html="value.long | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
        </fieldset>
        <fieldset/>
    </form>
</script>
