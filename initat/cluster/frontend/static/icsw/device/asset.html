<script type="text/ng-template" id="icsw/device/asset/overview">
    <icsw-device-asset-overview icsw-sel-man="0"></icsw-device-asset-overview>
</script>

<script type="text/ng-template" id="icsw.device.asset.overview">
    <uib-alert type="warning" ng-show="!struct.data_loaded">Fetching data from server ...</uib-alert>
    <icsw-tools-ensure-device-selection dev-list="struct.devices" list-ready="struct.data_loaded">
        <uib-tabset>
            <uib-tab ng-repeat="dev in struct.devices">
                <uib-tab-heading>
                    {{ dev.full_name }}
                </uib-tab-heading>

                <table
                    class="table table-condensed table-hover table-bordered"
                    style="width:auto;"
                    ng-show="dev.assetrun_set.length > 0"
                >
                        <tbody>
                            <tr>
                                <th style="width: 30px;"></th>
                                <th>Run Index</th>
                                <th>Run Type</th>
                                <th>Run Start</th>
                                <th>Run End</th>
                                <th>Length</th>
                                <th>Assets</th>
                            </tr>
                            <tr ng-repeat="assetrun in dev.assetrun_set">
                                <td>
                                    <button ng-if="assetrun.expanded" ng-click="assetrun.expanded = false">-</button>
                                    <button ng-if="!assetrun.expanded" ng-click="assetrun.expanded = true">+</button>
                                </td>
                                <td>{{ assetrun.run_index }}</td>
                                <td>{{ assetrun.run_type }}</td>
                                <td>{{ assetrun.run_start_time }}</td>
                                <td>{{ assetrun.run_end_time }}</td>
                                <td>{{ assetrun.assets.length }}</td>

                                <td ng-if="assetrun.expanded">
                                    <table
                                        class="table table-condensed table-hover table-bordered"
                                        style="width:auto;"
                                        ng-show="assetrun.assets"
                                    >
                                        <tr>
                                            <th>Name</th>
                                        </tr>
                                        <tr ng-repeat="asset in assetrun.assets track by $index">
                                            <td>{{ asset }}</td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                    </tbody>
                </table>
            </uib-tab>
        </uib-tabset>



    </icsw-tools-ensure-device-selection>
</script>