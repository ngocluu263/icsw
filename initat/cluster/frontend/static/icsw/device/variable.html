<script type="text/ng-template" id="icsw.device.variable.head">
    <tr>
        <th>Info</th>
        <th>Name</th>
        <th>Group</th>
        <th>Comment</th>
        <th colspan="1">Action</th>
    </tr>
</script>

<script type="text/ng-template" id="icsw.device.variable.row">
    <td>
        <button class="btn btn-primary btn-xs" ng-disabled="!num_vars(obj)" ng-click="expand_vt(obj)">
            <span ng_class="get_expand_class(obj)">
            </span> {{ obj.device_variable_set.length }}
            <span ng-if="var_filter.length"> / {{ obj.num_filtered }} shown</span>
            <span ng-if="parent_vars_defined(obj)">&nbsp;({{ num_parent_vars(obj) }} inherit)</span>
            <span ng-if="any_shadowed_vars(obj)">&nbsp;({{ num_shadowed_vars(obj) }} shadow)</span>
        </button>
    </td>
    <td>{{ get_name(obj) }}</td>
    <td>{{ obj.device_group_name }}</td>
    <td>{{ obj.comment }}</td>
    <td><input ng-show="enable_modal" type="button" class="btn btn-success btn-xs" ng-click="create(obj, $event)" value="create"/></td>
</script>

<script type="text/ng-template" id="icsw.device.variable.table">
    <table ng-show="device.expanded || device.num_filtered" class="table table-condensed table-hover" style="width:auto;">
        <thead>
            <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Value</th>
                <th>Public</th>
                <th>source</th>
                <th colspan="2">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="obj in device.device_variable_set | filter_name:filtervalue | orderBy:'name'">
                <td>{{ obj.name }}</td>
                <td class="text-center"><span class="badge">{{ get_var_type(obj) }}</span></td>
                <td>{{ get_value(obj) }}</td>
                <td>{{ obj.is_public|yesno1 }}</td>
                <td>direct</td>
                <td><input type="button" class="btn btn-primary btn-xs" ng-show="obj.is_public && enable_modal" ng-click="edit_mixin.edit(obj, $event)" value="modify"/></td>
                <td><input type="button" class="btn btn-danger btn-xs" ng-click="edit_mixin.delete_obj(obj)" value="delete"/></td>
            </tr>
            <tr ng-repeat="obj in get_parent_vars(device, 'g') | filter_name:filtervalue | orderBy:'name'">
                <td>{{ obj.name }}</td>
                <td class="text-center"><span class="badge">{{ get_var_type(obj) }}</span></td>
                <td>{{ get_value(obj) }}</td>
                <td>{{ obj.is_public|yesno1 }}</td>
                <td>group</td>
                <td colspan="2">
                    <input ng-show="obj.local_copy_ok" type="button" class="btn btn-xs btn-warning" value="local copy" ng-click="local_copy(obj, 'g')"/>
                </td>
            </tr>
            <tr ng-repeat="obj in get_parent_vars(device, 'c') | filter_name:filtervalue | orderBy:'name'">
                <td>{{ obj.name }}</td>
                <td class="text-center"><span class="badge">{{ get_var_type(obj) }}</span></td>
                <td>{{ get_value(obj) }}</td>
                <td>{{ obj.is_public|yesno1 }}</td>
                <td>cluster</td>
                <td colspan="2">
                    <input ng-show="obj.local_copy_ok" type="button" class="btn btn-xs btn-warning" value="local copy" ng-click="local_copy(obj, 'c')"/>
                </td>
            </tr>
        </tbody>
    </table>
</script>

<script type="text/ng-template" id="icsw.device.variable.overview">
    <h2>
        Device variables ({{ entries.length }} devices),
        <input ng-show="enable_modal" type="button" value="create new" title="create a new variable for all shown devices" class="btn btn-sm btn-success" ng-click="create_for_all($event)"/>
    </h2>
    <div class="row">
        <div class="col-sm-5 form-inline">
            <div class="form-group">
                <input class="form-control" ng-model="var_filter" placeholder="filter"/>
            </div>,
            <div class="form-group">
                <input
                    type="button"
                    ng-class="get_hide_class()"
                    ng-click="pagSettings.conf.filter_settings.hide_empty = !pagSettings.conf.filter_settings.hide_empty"
                    value="hide empty"
                />
            </div>
        </div>
    </div>

    <table class="table table-condensed table-hover" style="width:auto;">
        <thead icsw-device-variable-head></thead>
        <tbody>
            <tr><td colspan="9" paginator entries="entries" pag_settings="pagSettings" per_page="20"></td></tr>
            <tr icsw-device-variable-row ng-repeat-start="obj in entries | paginator:this" ng-class="get_tr_class(obj)"></tr>
            <tr ng-repeat-end ng-if="obj.expanded">
                <td colspan="9"><icsw-device-variable-table device="obj" filtervalue="var_filter"></vartable></td>
            </tr>
        </tbody>
    </table>
</script>
