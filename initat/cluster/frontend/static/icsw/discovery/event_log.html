
<script type="text/ng-template" id="icsw.discovery.event_log">
    <h2>
        Event Log
    </h2>

    <icsw-tools-ensure-device-selection dev-list="device_pks_ordered" list-ready="device_list_ready">
        <tabset>
            <tab ng-if="no_device_with_logs_selected" heading="N/A" active="device_tab_active['no_device_tab']">
                <alert type="warning">
                    No device with logs selected.
                </alert>
            </tab>
            <tab ng-repeat="device_pk in device_pks_ordered"
                    heading="{{devices_rest[device_pk].name}} ({{devices_rest[device_pk].capabilities_description}})"
                    active="device_tab_active[device_pk]"
                    select="set_active(device_pk)"
                    disable="devices_rest[device_pk].capabilities.length == 0"
                    >
                <div class="row" style="max-width: 900px; margin-top: 5px;">
                    <div class="col-sm-2">
                        <div class="form-inline" >
                            <label>
                                Type:&nbsp;
                            </label> <select class="form-control input-sm" ng-model="device_mode[device_pk]" ng-options="value as value for value in devices_rest[device_pk].capabilities"></select>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="input-group">
                            <input ng-model="mode_query_parameters.filter_str" class="form-control" placeholder="filter (whole words only)"/>
                            <span class="input-group-btn">
                                <button class="btn btn-warning" type="button" ng-click="mode_query_parameters.filter_str = ''"><span title="clear filter" class="fa fa-remove"> Clear</span></button>
                            </span>
                        </div>
                    </div>
                </div>

                <table class="table table-condensed table-striped" st-pipe="server_pagination_pipe[device_pk]" st-table="entries">
                    <thead>
                        <tr> <!-- ng-show="entries.keys && !entries.is_loading"> -->
                            <td colspan="99">
                                <icsw-tools-show-hide-columns columns-list="{{entries.keys}}"></icsw-tools-show-hide-columns>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="99">
                                <div icsw-tools-pagination st-items-by-page="10" st-displayed-pages="11" possible-items-by-page="10,20,50,100,200,500" no-number-of-elements="true"></div>
                            </td>
                        </tr>
                        <tr>
                            <th ng-repeat="key in entries.keys" ng-if="show_column[key]">
                                {{key}}
                            </th>
                        </tr>
                    </thead>
                    <tbody ng-if="!entries.is_loading">
                        <tr ng-repeat="entry in entries">
                            <td ng-repeat="key in entries.keys" ng-if="show_column[key]">
                                {{entry[key]}}
                            </td>
                        </tr>
                        <tr ng-if="entries.length == 0">
                            <td>
                                Query returned no entries.
                            </td>
                        </tr>
                    </tbody>
                    <tbody ng-show="entries.is_loading">
                        <tr>
                            <td colspan="99" class="text-center">
                                <i class="fa fa-4x fa-spinner fa-pulse"></i>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </tab>
        </tabset>
    </icsw-tools-ensure-device-selection>
</script>
