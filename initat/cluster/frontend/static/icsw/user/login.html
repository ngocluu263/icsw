<script type="text/ng-template" id="icsw/login.html">
    <icsw-login-page></icsw-login-page>
</script>

<script type="text/ng-template" id="icsw.user.login.page">
    <div class="container-fluid">
        <div class="row" >
            <div class="col-md-3 hidden-xs">
                <img width="100%;" ng-attr-src="{{ initProduct.menu_gfx_big_url }}" alt="{{ initProduct.name }} logo"/>
            </div>
            <div class="col-xs-12 col-md-6">
                <h2 ng-show="struct.cluster_data">
                    Welcome to {{ struct.cluster_data.CLUSTER_NAME }}
                </h2>
                <div class="well">
                    <icsw-login-form></icsw-login-form>
                    <fieldset>
                        <legend>
                            Version Information
                        </legend>
                        <p class="text-right">{{ initProduct.family }} ({{ initProduct.version }}) on Django {{ django_version }}</p>
                        <p class="text-right" ng-show="struct.cluster_data.CLUSTER_ID">
                            ClusterID is {{ struct.cluster_data.CLUSTER_ID }}
                        </p>
                        <p class="text-right" ng-show="struct.cluster_data.DATABASE_VERSION">
                            Version info is {{ struct.cluster_data.DATABASE_VERSION }}[D] {{ struct.cluster_data.SOFTWARE_VERSION }}[S] {{ struct.cluster_data.MODELS_VERSION }}[M]
                        </p>
                    </fieldset>
                    <fieldset>
                        <legend>
                            License Information
                        </legend>
                    <uib-alert type="warning" ng-show="!struct.fx_mode && struct.data_valid">
                        <p class="text-right">
                            FX-Mode is not licensed
                            <span class="fa-stack fa-2x">
                                <i class="fa fa-bolt fa-stack-2x"></i>
                                <i class="fa fa-ban fa-stack-2x text-danger"></i>
                            </span>
                        </p>
                    </uib-alert>
                    <uib-alert type="success" ng-show="struct.fx_mode && struct.data_valid">
                        <p class="text-right">
                            FX-Mode activated
                            <span class="fa fa-bolt fa-border fa-2x"></span>
                        </p>
                    </uib-alert>
                    <uib-alert ng-show="license_tree.pack_list.length == 0" style="font-size: larger">
                        You are running an <strong>unlicensed version</strong>.<br />
                        Please contact <strong>support@init.at</strong> in order to obtain a license.
                    </uib-alert>
                    <uib-alert ng-show="disabled" style="font-size: larger">
                        Awaiting license information ...
                    </uib-alert>
                    </fieldset>
                </div>
            </div>
            <div class="col-md-3 hidden-xs">
                <img width="100%;" ng-attr-src="{{ initProduct.menu_gfx_big_url }}" alt="{{ initProduct.name }} logo"/>
            </div>
        </div>
        <div ng-show="login_hints.length" class="row">
            <div class="col-md-offset-2 col-md-8">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3>Login hints</h3>
                    </div>
                    <div class="panel-body">
                        <ul class="list-group">
                            <li class="list-group-item" ng-repeat="entry in login_hints">
                                <span ng-show="entry[2]">superuser </span>
                                <span ng-show="!entry[2]">user </span>
                                <code><b>{{ entry[0] }}</b></code> has password <code>'{{ entry[1] }}'</code>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/ng-template" id="icsw.authentication.form">
    <form ng-submit="do_login()">
        <fieldset>
            <legend>
                Please enter your login credentials
            </legend>
            <div class="form-group row">
                <label class="control-label col-sm-3 requiredField">
                    Username<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-9">
                    <input ng-disabled="struct.disabled" icsw-auto-focus="!struct.disabled" class="textinput textInput form-control" maxlength="30" name="username" ng-model="login_data.username" placeholder="user name" required="True" type="text"/>
                </div>
            </div>
           <div class="form-group row">
                <label class="control-label col-sm-3 requiredField">
                    Password<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-9">
                    <input ng-disabled="struct.disabled" class="textinput textInput form-control" name="password" ng-model="login_data.password" placeholder="password" required="True" type="password"/>
                </div>
            </div>
            <div class="form-group row">
                <label class="control-label col-sm-3 requiredField">
                    One Time Password (Optional)
                </label>
                <div class="controls col-sm-9">
                    <input ng-disabled="struct.disabled" class="textinput textInput form-control" name="otp" ng-model="login_data.otp" placeholder="one time password" type="password"/>
                </div>
            </div>
        </fieldset>
        <div class="form-group row">
            <div class="control col-sm-12">
                <icsw-tools-button ng-disabled="struct.disabled" class="pull-right" button-type="submit" type="submit" value="Login"></icsw-tools-button>
            </div>
        </div>
    </form>


    <form ng-submit="request_sms_tan()">
        <fieldset>
            <legend>
                Request One Time Password per SMS
            </legend>
            <div class="form-group row">
                <label class="control-label col-sm-3 requiredField">
                    Username<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-9">
                    <input ng-disabled="struct.disabled" icsw-auto-focus="!struct.disabled" class="textinput textInput form-control" maxlength="30" name="username" ng-model="login_data.username" placeholder="user name" required="True" type="text"/>
                </div>
            </div>
        </fieldset>
        <div class="form-group row">
            <div class="control col-sm-12">
                <icsw-tools-button ng-disabled="struct.disabled" class="pull-right" button-type="submit" type="submit" value="Request"></icsw-tools-button>
            </div>
        </div>
    </form>
</script>
