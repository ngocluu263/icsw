{% extends "main.html" %}

{% load i18n coffeescript crispy_forms_tags %}

{% block title %}{% trans "User Overview" %}{% endblock %}

{% block content %}

<script type="text/ng-template" id="group_edit.html">
    {% crispy group_detail_form group_detail_form.helper %}
</script>

<script type="text/ng-template" id="user_edit.html">
    {% crispy user_detail_form user_detail_form.helper %}
</script>

{% verbatim %}

<div ng-controller="user_tree">
    <h2>
        User / Group tree ({{ group_list.length }} groups, {{ user_list.length }} users)
    </h2>
    <div class="col-sm-4">
        <div class="row">
            <input type="text" class="form-control" ng-model="filterstr" placeholder="filter ..." ng-change="update_filter()"></input>
        </div>
        <div class="row">
            <input type="button" class="btn btn-success" value="create group" ng-click="create_group()"></input>&nbsp;
            <input type="button" class="btn btn-primary" value="create user" ng-click="create_user()"></input>&nbsp;
            <input type="button" class="btn btn-warning" value="sync users" ng-click="sync_users()"></input>
        </div>
        <div class="row">
            <tree treeconfig="tree"></tree>
        </div>
    </div>
    <div class="col-sm-8">
        <div grouptemplate ng-if="_edit_mode == 'g' && modal_active" class="well well-sm">
        </div>
        <div ng-controller="password_ctrl">
            <div usertemplate ng-if="_edit_mode == 'u' && modal_active" class="well well-sm">
            </div>
        </div>
    </div>
</div>

{% endverbatim %}

{% endblock %}
