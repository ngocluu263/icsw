<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    {% load i18n coffeescript pipeline staticfiles %}

    <meta charset="utf-8">
    
    <!-- Use the .htaccess and remove these lines to avoid edge case issues.
         More info: h5bp.com/i/378 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>{{ settings.INIT_PRODUCT_NAME }}&reg; - {% block title%}{% trans 'Main Page' %}{% endblock %}</title>
    <meta http-equiv="Cache-Control" content="max-age=28800, must-revalidate" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <!-- Mobile viewport optimized: h5bp.com/viewport -->
    <meta name="viewport" content="width=device-width"/>
    
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->
    <link rel="icon" type="image/png" href="/cluster/static/images/noctua_favicon.png" />
    {% stylesheet 'part1' %}

    <style type="text/css">

    th.rotate {
      height: 140px;
      white-space: nowrap;
    }
    
    th.rotate > div {
      transform: 
        translate(8px, -8px)
        rotate(315deg);
      width: 30px;
    }
    
    th.rotate > div > span {
      border-bottom: 1px solid #ccc;
      padding: 5px 10px;
    }

    #icsw-wrapper {
        padding-left: 0;
        -webkit-transition: all 0.5s ease;
        -moz-transition: all 0.5s ease;
        -o-transition: all 0.5s ease;
        transition: all 0.5s ease;
    }
    
    #icsw-sidebar-wrapper {
        z-index: 1000;
        position: fixed;
        width: 0;
        height: 100%;
        padding-bottom: 54px;
        padding-left:0px;
        overflow-y: auto;
        background-color: rgba(255, 255, 255, 1);
        -webkit-transition: all 0.2s ease;
        -moz-transition: all 0.2s ease;
        -o-transition: all 0.2s ease;
        transition: all 0.2s ease;
    }
    
    #icsw-sidebar-sep {
        z-index: 1000;
        position: fixed;
        width: 12px;
        height: 100%;
        margin-left: 1px;
        margin-right: 1px;
        overflow-y: auto;
        background-color: #dddddd;
        border:1px solid #888888;
        -webkit-transition: all 0.2s ease;
        -moz-transition: all 0.2s ease;
        -o-transition: all 0.2s ease;
        transition: all 0.2s ease;
    }
    
    #page-content-wrapper {
        width: 100%;
        padding: 2px;
    }
    
    .CodeMirror {
        border-top: 1px solid black;
        border-bottom: 1px solid black;
        height: auto;
    }
    
    .CodeMirror-scroll {
        overflow-y: hidden;
        overflow-x: auto;
        max-height: 600px;
    }
    
    .CodeMirror-activeline-background {
        background: #ffff00 !important;
    }
    
    circle.fixed {
        fill : #ffaaaa ;
        stroke : #5555ff ;
    }
    .connect_line {
        stroke : #9999ff ;
        stroke-width : 4;
        pointer-events : none;
    }
    .connect_line_hidden {
        stroke-width : 0
    }
    .angular-google-map-container { height: 480px; }
    </style>
    
    <!-- More ideas for your <head> here: h5bp.com/d/head-Tips -->
    
    <!-- All JavaScript at the bottom, except this Modernizr build.
         Modernizr enables HTML5 elements & feature detects for optimal performance.
         Create your own custom Modernizr build: www.modernizr.com/download/ -->
    <!--[if lt IE 9]>
        <script type="text/javascript" src='{% static "js/libs/modernizr-2.7.1.ie8.js" %}'></script>
        <script type="text/javascript" src='{% static "js/libs/jquery-1.11.1.js" %}'></script>
        <script type="text/javascript" src='{% static "js/plugins.js" %}'></script>
        <script type="text/javascript" src='{% static "js/libs/html5shiv.js" %}'></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->{% javascript 'js_jquery_new' %}<!--<![endif]-->
    <script type="text/javascript">
    {% inlinecoffeescript %}
    # attach global permissions and license info to window object (== global variable)
    window.CSRF_TOKEN = "{{ csrf_token }}"
    window.LOGIN_HINTS = {{ login_hints | safe }}
    window.LOGIN_SCREEN_TYPE = "{{ LOGIN_SCREEN_TYPE }}"
    window.INIT_PRODUCT_NAME = "{{ settings.INIT_PRODUCT_NAME }}"
    window.INIT_PRODUCT_FAMILY = "{{ settings.INIT_PRODUCT_FAMILY }}"
    window.INIT_PRODUCT_VERSION = "{{ settings.INIT_PRODUCT_VERSION }}"
    window.DJANGO_VERSION = "{{ DJANGO_VERSION }}"
    window.CLUSTER_LICENSE = {{ CLUSTER_LICENSE | safe }}
    window.GLOBAL_PERMISSIONS = {{ GLOBAL_PERMISSIONS | safe }}
    window.OBJECT_PERMISSIONS = {{ OBJECT_PERMISSIONS | safe }}
    window.CURRENT_USER = {{ CURRENT_USER | safe }}
    window.NUM_BACKGROUND_JOBS = {{ NUM_BACKGROUND_JOBS }}
    window.SERVICE_TYPES = {{ SERVICE_TYPES | safe }}
    window.NUM_QUOTA_SERVERS = {{ NUM_QUOTA_SERVERS | safe }}
    window.USER_VARS = {{ USER_VARS | safe }}
    window.INDEX_VIEW = {% if index_view %}true{% else %}false{% endif %}
    window.IS_AUTHENTICATED = {% if user.is_authenticated %}true{% else %}false{% endif %}
    window.HANDBOOK_PDF_PRESENT = {% if settings.HANDBOOK_PDF_PRESENT %}true {% else %}false{% endif %}
    window.HANDBOOK_CHUNKS_PRESENT = {% if settings.HANDBOOK_CHUNKS_PRESENT %}true {% else %}false{% endif %}
    window.ROUTING = {{ routing | safe }}
    window.LOCAL_DEVICE = "{{ local_device }}"
    window.SIDEBAR_MODE = "{{ request.session.sidebar_mode }}"
    window.DEVICE_OBJECT_LEVEL_PERMISSION = "{{ device_object_level_permission }}"
    window.CSRF_TOKEN = "{{ csrf_token }}"
    {% if doc_page %}
    window.DOC_PAGE = "{{ doc_page }}"
    {% else %}
    window.DOC_PAGE = null
    {% endif %}
    {% endinlinecoffeescript %}
    </script>
    {% javascript 'js_base' %}
    {% javascript 'js_extra1' %}
    <script src='//maps.googleapis.com/maps/api/js?sensor=false{% if GOOGLE_MAPS_KEY %}&key={{GOOGLE_MAPS_KEY}}{% endif %}'></script>
    {% javascript 'js_gmaps' %}
    {% include "angular/common_functions.cs" %}
    <script type="text/javascript">
    {% inlinecoffeescript %}
    {% include "angular/app.cs" %}
    {% endinlinecoffeescript %}
    </script>
    {% include "javascript/init.js" %}
    {# common angular modules #}
    {% javascript 'icsw_cs1' %}
    {% include "angular/device_network.cs" %}
    {% include "angular/device_connection.cs" %}
    {% include "angular/angular-dimple-init.cs" %}
    {% comment %}
    {% include "angular/monitoring_device.cs" %}
    {% include "angular/monitoring_basic.cs" %}
    {% include "angular/monitoring_extended.cs" %}
    {% include "angular/monitoring_overview.cs" %}
    {% include "angular/monitoring_build_info.cs" %}
    {% endcomment %}

</head>
<body>
<!--[if lt IE 8]>
    <p class=chromeframe>
        Your browser is <em>ancient!</em>
        <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
        <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.
    </p>
<![endif]-->
    <header>
        {% block header %}
        {% endblock %}
    </header>
    <div id="icsw.app">
        {% for ssi_file in settings.SSI_FILES %}
            {% ssi ssi_file %}
        {% endfor %}
        <icsw-layout-menubar></icsw-layout-menubar>
        <div block-ui="main" class="block-ui-main"></div>
        <div id="icsw-wrapper">
            <icsw-layout-sidebar></icsw-layout-sidebar>
            <div id="page-content-wrapper">
                <div class="container-fluid">
                    {% block content %}
                    {% endblock %}
                </div>
            </div>
        </div>
    </div>
    <footer>
        <script type="text/javascript">
        
        {% inlinecoffeescript %}
        
        init_noty = ->
            $.noty.defaults = {
                "layout" : "topRight"
                "theme"  : "defaultTheme"
                "type"   : 'success'
                "text"   : ''
                "dismissQueue" : true, # If you want to use queue feature set this true
                "template"     : '<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>'
                "animation"    : {
                    open   : {height: 'toggle'}
                    close  : {height: 'toggle'}
                    easing : 'swing'
                    speed  : 200 # opening & closing animation speed
                }
                "timeout"   : 5000,  # delay for closing event. Set false for sticky notifications
                "force"     : false, # adds notification to the beginning of queue when set to true
                "modal"     : false,
                "closeWith" : ['hover'], # ['click', 'button', 'hover']
                "callback" : {
                    onShow     : ->
                    afterShow  : ->
                    onClose    : ->
                    afterClose : ->
                }
                buttons: false
            }
        add_handlers_main = ->
            init_noty()
            # bootstrap app
            angular.bootstrap($("div[id='icsw.app']"), ["icsw.app"])
        
        angular.element(document).ready(add_handlers_main)
        
        {% endinlinecoffeescript %}
        
        </script>
    </footer>

</body>
</html>
