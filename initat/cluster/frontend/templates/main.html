<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    {% load i18n coffeescript compressed staticfiles %}

    <meta charset="utf-8">
    
    <!-- Use the .htaccess and remove these lines to avoid edge case issues.
         More info: h5bp.com/i/378 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>{{ settings.INIT_PRODUCT_NAME }}&reg; - {% block title%}{% trans 'Main Page' %}{% endblock %}</title>
    <meta http-equiv="Cache-Control" content="max-age=28800, must-revalidate" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <!-- Mobile viewport optimized: h5bp.com/viewport -->
    <meta name="viewport" content="width=device-width"/>
    
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->

    {% block stylesheets %}
        {% compressed_css 'part1' %}

    <style type="text/css">
    body { padding-top: 54px; }
    #wrapper {
        padding-left: 0;
        -webkit-transition: all 0.5s ease;
        -moz-transition: all 0.5s ease;
        -o-transition: all 0.5s ease;
        transition: all 0.5s ease;
    }
    
    #wrapper.toggled {
        padding-left: 250px;
    }
    
    #sidebar-wrapper {
        z-index: 1000;
        position: fixed;
        left: 350px;
        width: 0;
        height: 100%;
        margin-left: -350px;
        overflow-y: auto;
        -webkit-transition: all 0.5s ease;
        -moz-transition: all 0.5s ease;
        -o-transition: all 0.5s ease;
        transition: all 0.5s ease;
    }
    
    #sidebar-sep {
        z-index: 1000;
        position: fixed;
        left: 350px;
        width: 6px;
        height: 100%;
        margin-left: 1px;
        margin-right: 1px;
        overflow-y: auto;
        background-color: #dddddd;
        border:1px solid #888888;
        -webkit-transition: all 0.5s ease;
        -moz-transition: all 0.5s ease;
        -o-transition: all 0.5s ease;
        transition: all 0.5s ease;
    }
    
    #wrapper.toggled #sidebar-wrapper {
        width: 350px;
    }
    
    #page-content-wrapper {
        width: 100%;
        padding: 2px;
    }
    
    #wrapper.toggled #page-content-wrapper {
        position: absolute;
        margin-right: -356px;
    }
    
    @media(min-width:400px) {
        #wrapper {
            padding-left: 356px;
        }
        #wrapper.toggled {
            padding-left: 0;
        }
        #sidebar-wrapper {
            width: 350px;
        }
        #wrapper.toggled #sidebar-wrapper {
            width: 0;
        }
        #page-content-wrapper {
            padding: 2px;
        }
        #wrapper.toggled #page-content-wrapper {
            position: relative;
            margin-right: 0;
        }
    }
    .CodeMirror {
        border-top: 1px solid black;
        border-bottom: 1px solid black;
        height: auto;
    }
    
    .CodeMirror-scroll {
        overflow-y: hidden;
        overflow-x: auto;
        max-height: 600px;
    }
    
    .CodeMirror-activeline-background {
        background: #ffff00 !important;
    }
    
    </style>
    
    {% block tab_js %}{% endblock %}
    
    {% endblock %}
    {% block site_css %}
    {% endblock %}
    
    <!-- More ideas for your <head> here: h5bp.com/d/head-Tips -->
    
    <!-- All JavaScript at the bottom, except this Modernizr build.
         Modernizr enables HTML5 elements & feature detects for optimal performance.
         Create your own custom Modernizr build: www.modernizr.com/download/ -->
    {% block javascript %}
        <!--[if lt IE 9]>
            <script type="text/javascript" src='{% static "js/libs/modernizr-2.7.1.ie8.js" %}'></script>
            <script type="text/javascript" src='{% static "js/libs/jquery-1.11.1.js" %}'></script>
            <script type="text/javascript" src='{% static "js/plugins.js" %}'></script>
            <script type="text/javascript" src='{% static "js/libs/html5shiv.js" %}'></script>
        <![endif]-->
        <!--[if gte IE 9]><!-->{% compressed_js 'js_jquery_new' %}<!--<![endif]-->
        <script type="text/javascript">
        {% inlinecoffeescript %}
        # attach global permissions and license info to window object (== global variable)
        window.INIT_PRODUCT_NAME = "{{ settings.INIT_PRODUCT_NAME }}"
        window.CLUSTER_LICENSE = {{ CLUSTER_LICENSE | safe }}
        window.GLOBAL_PERMISSIONS = {{ GLOBAL_PERMISSIONS | safe }}
        window.OBJECT_PERMISSIONS = {{ OBJECT_PERMISSIONS | safe }}
        window.CURRENT_USER = {{ CURRENT_USER | safe }}
        window.NUM_BACKGROUND_JOBS = {{ NUM_BACKGROUND_JOBS }}
        window.SERVICE_TYPES = {{ SERVICE_TYPES | safe }}
        window.NUM_QUOTA_SERVERS = {{ NUM_QUOTA_SERVERS | safe }}
        window.INDEX_VIEW = {% if index_view %}true{% else %}false{% endif %}
        {% endinlinecoffeescript %}
        </script>
        {% compressed_js 'js_base' %}
        {% compressed_js 'js_extra1' %}
    
        {% include "javascript/init.js" %}
        {% include "javascript/deviceinfo.js" %}
        {# common angular modules #}
        {% include "angular/common_functions.cs" %}
        {% include "angular/tree.cs" %}
        {% include "angular/rrd.cs" %}
        {% include "angular/user.cs" %}
        {% include "angular/device_config.cs" %}
        {% include "angular/device_livestatus.cs" %}
        {% include "angular/device_graph.cs" %}
        {% include "angular/device_network.cs" %}
        {% include "angular/device_variable.cs" %}
        {# site-related javascript load blocks #}
        {% block js_load_1 %}{% endblock %}
        {# site-related angular modules #}
        {% block angular %}{% endblock %}
    {% endblock %}

</head>
<body>
    <!--[if lt IE 8]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <header>
    {% block header %}
    {% endblock %}
    </header>

    {% if user.is_authenticated %}
        {% include "menu.html" %}
    {% endif %}
    <div id="wrapper" {% if not user.is_authenticated %}class="toggled"{% endif %}>

        {% if user.is_authenticated %}
            <div id="sidebar-wrapper">
                {% include 'sidebar.html' %}
            </div>
            <div id="sidebar-sep"></div>
        {% endif %}

        <div id="page-content-wrapper">
            <div class="container-fluid">
                {% block content %}
                {% endblock %}
            </div>
        </div>
    </div>
    <footer>
        <script type="text/javascript">
        
        {% inlinecoffeescript %}
        
        init_blockUI = ->
            $.blockUI.defaults.fadeOut = 0
            $.blockUI.defaults.fadeIn  = 0
            $.blockUI.defaults.overlayCSS.opacity = 0.1
            
        init_noty = ->
            $.noty.defaults = {
                "layout" : "topRight"
                "theme"  : "defaultTheme"
                "type"   : 'success'
                "text"   : ''
                "dismissQueue" : true, # If you want to use queue feature set this true
                "template"     : '<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>'
                "animation"    : {
                    open   : {height: 'toggle'}
                    close  : {height: 'toggle'}
                    easing : 'swing'
                    speed  : 200 # opening & closing animation speed
                }
                "timeout"   : 5000,  # delay for closing event. Set false for sticky notifications
                "force"     : false, # adds notification to the beginning of queue when set to true
                "modal"     : false,
                "closeWith" : ['hover'], # ['click', 'button', 'hover']
                "callback" : {
                    onShow     : ->
                    afterShow  : ->
                    onClose    : ->
                    afterClose : ->
                }
                buttons: false
            }
        add_handlers_main = ->
            init_blockUI()
            init_noty()
        
        angular.element(document).ready(add_handlers_main)
        
        {% endinlinecoffeescript %}
        
        </script>
    </footer>

</body>
</html>
