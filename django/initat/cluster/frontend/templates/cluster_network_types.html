{% extends "main.html" %}

{% load i18n extra_tags %}

{% block title %}Cluster network types{% endblock %}

{% block content %}

<h1>Network types</h1>

<div id="nwt_tables"></div>

<script type="text/javascript">

// nwt XML
NETWORK_TYPES = undefined;

var draw_array = {
    "nwt" : [
        new draw_info("identifier", {select_source : "network_type_choices network_type_choice"} ), 
        new draw_info("description")
    ],
    "nwdt" : [
        new draw_info("identifier"),
        new draw_info("description"),
        new draw_info("mac_bytes", {label : "MAC size", min : 6, max : 18, number : 1, default : 6})
    ]
}

var master_array = {
    "nwt" : new draw_setup("NetworkType", "nwt", "network_type",
        "{% url mon:create_object 'network_type' %}",
        "{% url mon:delete_object 'network_type' %}"),
    "nwdt" : new draw_setup("NetworkDevicetype", "nwdt", "network_device_type",
        "{% url mon:create_object 'network_device_type' %}",
        "{% url mon:delete_object 'network_device_type' %}"),
};   

function load_nwts() {
    $.ajax({
        url     : "{% url network:get_network_d_types %}",
        error   : handle_ajax_error,
        success : function(xml) {
            if (parse_xml_response(xml)) {
                NETWORK_TYPES = $(xml).find("value[name='response']");
                init_xml_change(NETWORK_TYPES);
                draw_tables();
            }
        }
    });
}

function draw_tables() {
    var t_div = $("div#nwt_tables");
    t_div.children().remove();
    for (var key in master_array) {
        t_div.append(master_array[key].draw_table());
    };
};

function add_config_handlers() {
    load_nwts();
};

$(document).ready(add_config_handlers);

</script>

{% endblock %}
