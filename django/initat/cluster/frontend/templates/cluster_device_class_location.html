{% extends "main.html" %}

{% load i18n extra_tags coffeescript %}

{% block title %}Cluster device class / location{% endblock %}

{% block content %}

<h1>Device classes / locations</h1>

<div id="cdcl_tables"></div>

<script type="text/javascript">

{% inlinecoffeescript %}

master_array = {
    "dc" : new draw_setup("Device Class", "dc", "device_class",
        "{% url 'base:create_object' 'device_class' %}",
        "{% url 'base:delete_object' 'device_class' %}",
        [
            new draw_info("classname", { clear_after_create : true }),
            new draw_info("priority", {min : -100, max : 100, number : 1, default : 0})
        ],
        {lock_div : "cdcl_tables"}
    ),
    "dl" : new draw_setup("Device Location", "dl", "device_location",
        "{% url 'base:create_object' 'device_location' %}",
        "{% url 'base:delete_object' 'device_location' %}",
        [
            new draw_info("location", { clear_after_create : true })
        ],
        {lock_div : "cdcl_tables"}
    )
}

add_config_handlers = ->
    $.ajax
        url     : "{% url 'setup:show_device_class_location' %}"
        success : (xml) =>
            if parse_xml_response(xml)
                draw_ds_tables($("div#cdcl_tables"), master_array, $(xml).find("value[name='response']"))

$(document).ready(add_config_handlers)

{% endinlinecoffeescript %}

</script>

{% endblock %}
